# 教材业务逻辑

## 添加教材 
- (同一教材添加过一次后，不能重复添加)

::: tip
1.教材名称

2.出版社名称

3.作者

4.版别

5.选择课程 (教材和课程绑定)

6.教材类型  专业教材  通用教材  选读教材

7.采购价(选填)

8.学生生购买价(选填)

9.教材介绍 
     
:::


## 教材数据的计算 
- (实时计算)
::: tip

一年级的教材数量是根据下一年的预招计划的实招人数 + n%的浮动

二年级的教材数量是根据一年级在校人数 + n%的浮动

其他年级的教材以此类推 

教材是和课程绑定，查找该课有那些专业在读，查找该专业的当前学期的总人数就是在校人数

:::


## 查看某专业教材的采购情况
::: tip
通过专业查看所有的课程
 
查看该课程是哪年级的教程
 
查看课程年级的下一级的班级 (查看班级:当前年份-教材的年级=班级的入学年份)
 
在计算班级的学生总数 
  
当课程的1年级的教材,应该参考已录取的学生数和计划招生数返回
:::



## 以班级为单位查询教材

::: tip
查询该班级的人数

通过班级对应的专业查询下一年要的课程

通过课程查询相关的教材

最后得出多少教材多少本
:::

## 通过校区查询教材

::: tip
查询该校区下的专业

通过专业获取课程并关联到教材

再通过当前课程的专业和年级获取相应的下一级学生人数

如果课程的年级是1年级,应该参考已录取的学生数和计划招生数返回

:::



## 领书信息
::: tip
1. 学生通过班级查询到专业,和入学年份,根据当前时间计算出年级

2. 通过年级和专业查询所上的课程

3. 通过课程再关联出教材

4. 再查询当前教材是否被领取
:::
